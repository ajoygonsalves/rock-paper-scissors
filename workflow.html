<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Draggable Div Cards</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      #canvas {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
      }
    </style>
  </head>
  <body class="p-8">
    <div
      id="card1"
      class="w-48 h-48 bg-blue-500 text-white p-4 rounded-md absolute cursor-move"
    >
      Card 1
    </div>
    <div
      id="card2"
      class="w-48 h-48 bg-red-500 text-white p-4 rounded-md absolute cursor-move"
    >
      Card 2
    </div>
    <canvas id="canvas"></canvas>

    <script>
      // Get the draggable elements
      const card1 = document.getElementById("card1");
      const card2 = document.getElementById("card2");

      // Get the canvas element
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      // Set canvas size
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      // Store initial positions
      let card1X = 0;
      let card1Y = 0;
      let card2X = 0;
      let card2Y = 0;

      // Store mouse offset
      let offsetX1 = 0;
      let offsetY1 = 0;
      let offsetX2 = 0;
      let offsetY2 = 0;

      // Update canvas and draw curve
      function updateCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath();
        ctx.moveTo(card1X + card1.offsetWidth, card1Y + card1.offsetHeight / 2);
        ctx.quadraticCurveTo(
          (card1X + card2X) / 2,
          (card1Y + card2Y) / 2 + 100,
          card2X + card2.offsetWidth / 2,
          card2Y + card2.offsetHeight / 2
        );
        ctx.strokeStyle = "#000000";
        ctx.lineWidth = 2;
        ctx.stroke();
      }

      // Event listeners for dragging
      card1.addEventListener("mousedown", (e) => {
        offsetX1 = e.clientX - card1X;
        offsetY1 = e.clientY - card1Y;
        document.addEventListener("mousemove", onMouseMove1);
        document.addEventListener("mouseup", onMouseUp1);
      });

      card2.addEventListener("mousedown", (e) => {
        offsetX2 = e.clientX - card2X;
        offsetY2 = e.clientY - card2Y;
        document.addEventListener("mousemove", onMouseMove2);
        document.addEventListener("mouseup", onMouseUp2);
      });

      // Handle dragging for card1
      function onMouseMove1(e) {
        card1X = e.clientX - offsetX1;
        card1Y = e.clientY - offsetY1;

        card1.style.transform = `translate(${card1X}px, ${card1Y}px)`;

        updateCanvas();
      }

      // Handle mouseup event for card1
      function onMouseUp1() {
        document.removeEventListener("mousemove", onMouseMove1);
        document.removeEventListener("mouseup", onMouseUp1);
      }

      // Handle dragging for card2
      function onMouseMove2(e) {
        card2X = e.clientX - offsetX2;
        card2Y = e.clientY - offsetY2;

        card2.style.transform = `translate(${card2X}px, ${card2Y}px)`;

        updateCanvas();
      }

      // Handle mouseup event for card2
      function onMouseUp2() {
        document.removeEventListener("mousemove", onMouseMove2);
        document.removeEventListener("mouseup", onMouseUp2);
      }
    </script>
  </body>
</html>
